import React from 'react'
import { useCssHandles } from 'vtex.css-handles'
import { useProduct } from 'vtex.product-context'
import type { ProductContextState } from 'vtex.product-context/react/ProductTypes'
import { withToast } from 'vtex.styleguide'

const CSS_HANDLES = [
  'shareContainer',
  'shareButton',
  'shareIcon',
  'shareContainerContent',
  'shareContainerTitle',
] as const

function CustomShareproduct({
  showToast,
}: {
  showToast: (message: string) => void
}) {
  const { product } = useProduct() as ProductContextState
  const { handles } = useCssHandles(CSS_HANDLES)

  const shareurl = `https://www.pontodamoda.com.br/${product?.linkText}/p`

  const handleShare = (platform: string) => {
    const encodedUrl = encodeURIComponent(shareurl)
    let shareLink = ''

    switch (platform) {
      case 'facebook':
        shareLink = `https://www.facebook.com/sharer/sharer.php?u=${encodedUrl}`
        break

      case 'twitter':
        shareLink = `https://twitter.com/intent/tweet?url=${encodedUrl}`
        break

      case 'pinterest':
        shareLink = `https://pinterest.com/pin/create/button/?url=${encodedUrl}`
        break

      case 'whatsapp':
        shareLink = `https://wa.me/?text=${encodedUrl}`
        break

      case 'instagram':
        window.navigator.clipboard.writeText(shareurl)

        showToast('Link copiado para a área de transferência!')

        return

      default:
        return
    }

    window.open(shareLink, '_blank')
  }

  const shareElements: Array<{ onClick: () => void; icon: JSX.Element }> = [
    {
      onClick: () => handleShare('facebook'),
      icon: (
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="10"
          height="20"
          viewBox="0 0 10 20"
          fill="none"
        >
          <path
            d="M8.17586 3.32469H10.0019V0.14469C9.11856 0.0475973 8.23047 0.00052222 7.34186 0.00368982C4.71386 0.00368982 2.90586 1.65969 2.90586 4.70369V7.50369H0.00585938V11.0587H2.90586V20.0037H6.46786V11.0597H9.25486L9.69686 7.50369H6.46686V5.05569C6.46686 4.02869 6.74386 3.32469 8.17586 3.32469Z"
            fill="black"
          />
        </svg>
      ),
    },
    {
      onClick: () => handleShare('instagram'),
      icon: (
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="21"
          height="20"
          viewBox="0 0 21 20"
          fill="none"
        >
          <path
            d="M2.18818 18.3176C0.293176 16.4226 0.512395 13.8866 0.512395 9.99656C0.512395 6.19656 0.264176 3.60662 2.18818 1.68162C3.32456 0.616721 4.83223 0.0364402 6.38935 0.0636973C8.23135 -0.0183027 12.7896 -0.0183027 14.6276 0.0636973C18.3956 0.240697 20.2761 2.37066 20.4401 5.87766C20.5221 7.71966 20.5281 12.2777 20.4401 14.1157C20.3051 17.0937 18.9055 18.7466 17.0515 19.4646C15.6925 19.9946 14.3625 19.9946 10.5065 19.9946C9.72754 19.9946 8.99732 20.0056 8.30732 20.0056C5.68732 20.0036 3.71718 19.8466 2.18818 18.3176ZM17.5358 17.0407C18.7758 15.7987 18.6999 14.1156 18.6999 9.99656C18.6999 7.33056 18.6883 7.01369 18.6413 5.95969C18.4303 1.34069 14.9416 1.80466 10.5026 1.80466L10.4675 1.78171C7.79547 1.78171 7.48564 1.79359 6.41864 1.82859C1.79964 2.06359 2.27021 5.3826 2.27021 9.9846C2.27021 13.3846 2.0185 15.6335 3.4245 17.0285C4.6435 18.2525 6.31319 18.1877 10.4792 18.1877C14.5272 18.1887 16.2758 18.3037 17.5358 17.0407ZM5.37177 9.99656C5.37204 8.63581 5.91348 7.33106 6.87568 6.36887C7.83787 5.40668 9.14384 4.86596 10.5046 4.8657C11.1785 4.86557 11.8448 4.99805 12.4675 5.25584C13.0902 5.51362 13.6568 5.89168 14.1335 6.36814C14.6101 6.8446 14.9868 7.4101 15.2448 8.03269C15.5028 8.65528 15.6373 9.32261 15.6374 9.99656C15.6377 10.6706 15.5047 11.3381 15.2468 11.9609C14.9889 12.5837 14.6102 13.1497 14.1335 13.6262C13.6568 14.1027 13.0903 14.4806 12.4675 14.7383C11.8446 14.9959 11.1786 15.1282 10.5046 15.1277C9.14384 15.1277 7.83806 14.5872 6.87568 13.6252C5.9133 12.6632 5.3723 11.3573 5.37177 9.99656ZM7.17255 9.99656C7.17203 10.4341 7.25735 10.8674 7.4245 11.2717C7.59165 11.676 7.83785 12.0434 8.14716 12.3528C8.45647 12.6622 8.82298 12.9077 9.22724 13.0749C9.6315 13.2422 10.0651 13.328 10.5026 13.3276C10.9402 13.328 11.3737 13.2422 11.778 13.0749C12.1824 12.9077 12.5506 12.6624 12.8601 12.353C13.1695 12.0436 13.4134 11.6763 13.5808 11.2719C13.7481 10.8676 13.8349 10.4341 13.8347 9.99656C13.8341 9.11311 13.4829 8.26618 12.8581 7.64158C12.2333 7.01698 11.3861 6.66601 10.5026 6.66575C10.0652 6.66588 9.63132 6.75213 9.22724 6.91965C8.82315 7.08717 8.45638 7.33266 8.14716 7.64207C7.83794 7.95147 7.59373 8.31869 7.42646 8.72288C7.25918 9.12706 7.17242 9.55912 7.17255 9.99656ZM14.6393 4.66575C14.6393 4.34749 14.7659 4.04216 14.9909 3.81712C15.216 3.59207 15.5223 3.46555 15.8405 3.46555C16.1588 3.46555 16.4631 3.59207 16.6882 3.81712C16.9132 4.04216 17.0397 4.34749 17.0397 4.66575C17.0397 4.98401 16.9132 5.28909 16.6882 5.51414C16.4631 5.73918 16.1588 5.8657 15.8405 5.8657C15.5223 5.8657 15.216 5.73918 14.9909 5.51414C14.7659 5.28909 14.6393 4.98401 14.6393 4.66575Z"
            fill="black"
          />
        </svg>
      ),
    },
    {
      onClick: () => handleShare('twitter'),
      icon: (
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="20"
          height="17"
          viewBox="0 0 20 17"
          fill="none"
        >
          <path
            d="M17.943 4.7207C18.7514 4.14266 19.4478 3.42224 19.998 2.5947C19.2458 2.92242 18.4503 3.14032 17.636 3.2417C18.4929 2.73182 19.1332 1.92569 19.436 0.9757C18.6322 1.45209 17.7529 1.78758 16.836 1.9677C16.274 1.36784 15.5447 0.950755 14.7427 0.77059C13.9406 0.590426 13.103 0.655498 12.3384 0.95736C11.5738 1.25922 10.9177 1.78394 10.455 2.4634C9.9924 3.14286 9.74469 3.94569 9.74405 4.7677C9.74082 5.08193 9.77268 5.39554 9.83905 5.7027C8.20885 5.62306 6.61377 5.20053 5.15792 4.4627C3.70207 3.72487 2.41818 2.68831 1.39005 1.4207C0.862056 2.32265 0.698438 3.39218 0.932629 4.41073C1.16682 5.42927 1.78114 6.31994 2.65005 6.9007C2.00093 6.88218 1.36577 6.70795 0.798047 6.3927V6.4377C0.799124 7.38452 1.12636 8.30206 1.72467 9.03588C2.32298 9.7697 3.15584 10.275 4.08305 10.4667C3.73232 10.5593 3.37079 10.6047 3.00805 10.6017C2.74761 10.6064 2.48744 10.5829 2.23205 10.5317C2.49712 11.3454 3.00779 12.057 3.69382 12.5686C4.37985 13.0802 5.20754 13.3667 6.06305 13.3887C4.61139 14.5232 2.82145 15.1386 0.979047 15.1367C0.651192 15.1388 0.323534 15.1201 -0.00195312 15.0807C1.87298 16.2887 4.05767 16.9278 6.28805 16.9207C7.86825 16.9318 9.43402 16.6195 10.8891 16.0033C12.3442 15.387 13.658 14.4797 14.7495 13.337C15.8411 12.1944 16.6875 10.8406 17.2367 9.35888C17.7859 7.87714 18.0263 6.29875 17.943 4.7207Z"
            fill="black"
          />
        </svg>
      ),
    },
    {
      onClick: () => handleShare('pinterest'),
      icon: (
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="17"
          height="20"
          viewBox="0 0 17 20"
          fill="none"
        >
          <path
            d="M8.89414 0.00366211C3.41214 0.00366211 0.494141 3.51666 0.494141 7.34666C0.494141 9.12266 1.48614 11.3387 3.07614 12.0407C3.52914 12.2407 3.46914 11.9957 3.85914 10.5037C3.87701 10.4435 3.87856 10.3796 3.86363 10.3187C3.84869 10.2577 3.81781 10.2018 3.77414 10.1567C1.50214 7.52966 3.33114 2.12766 8.56614 2.12766C16.1431 2.12766 14.7281 12.6127 9.88414 12.6127C9.60327 12.6353 9.32102 12.5912 9.06042 12.484C8.79982 12.3768 8.56824 12.2096 8.38457 11.9959C8.2009 11.7822 8.07034 11.5281 8.00353 11.2544C7.93672 10.9806 7.93556 10.6949 8.00014 10.4207C8.46959 9.10856 8.82262 7.75768 9.05514 6.38366C9.05514 3.76066 5.14714 4.14966 5.14714 7.62566C5.13923 8.24637 5.26901 8.86112 5.52714 9.42566C5.52714 9.42566 4.27314 14.5037 4.03914 15.4527C3.82504 16.925 3.85612 18.4225 4.13114 19.8847C4.13397 19.9115 4.14495 19.9368 4.16261 19.9572C4.18027 19.9776 4.20375 19.9921 4.2299 19.9987C4.25604 20.0054 4.2836 20.0039 4.30885 19.9944C4.3341 19.9849 4.35584 19.9679 4.37114 19.9457C5.24124 18.7496 5.93811 17.4366 6.44114 16.0457C6.59614 15.4747 7.23214 13.1587 7.23214 13.1587C7.56806 13.6103 8.00921 13.973 8.51724 14.2152C9.02527 14.4575 9.58479 14.5719 10.1471 14.5487C13.9771 14.5487 16.7471 11.1817 16.7471 7.00466C16.7341 3.00466 13.3061 0.00466211 8.89514 0.00466211L8.89414 0.00366211Z"
            fill="black"
          />
        </svg>
      ),
    },
    {
      onClick: () => handleShare('whatsapp'),
      icon: (
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="21"
          height="20"
          viewBox="0 0 21 20"
          fill="none"
        >
          <path
            d="M2.07617 14.8715C1.20479 13.3656 0.745948 11.6566 0.746094 9.91667C0.752094 1.17867 11.3547 -3.31741 17.7637 2.87859L17.752 2.90764C18.6769 3.82494 19.4103 4.91657 19.9102 6.11956C20.41 7.32254 20.6666 8.613 20.6641 9.9157C20.6531 11.638 20.1959 13.328 19.3379 14.8215C18.4798 16.3149 17.25 17.5608 15.7676 18.4377C14.2851 19.3146 12.601 19.7926 10.8789 19.8254C9.15685 19.8581 7.45612 19.4445 5.94141 18.6247L0.664062 20.0036L2.07617 14.8715ZM6.48828 16.9777C7.74406 17.7173 9.17155 18.1132 10.6289 18.1257C12.0863 18.1381 13.5228 17.7664 14.791 17.0483C16.0592 16.3301 17.1145 15.2907 17.8535 14.0346C18.5925 12.7785 18.9883 11.3499 19 9.8925C19.0025 8.80901 18.7896 7.73601 18.373 6.73577C17.9565 5.73552 17.345 4.8281 16.5742 4.06658C15.8085 3.29539 14.8965 2.68411 13.8926 2.26799C12.8887 1.85187 11.8133 1.63914 10.7266 1.6425C9.25223 1.63905 7.80301 2.03069 6.53125 2.77654C5.25949 3.52239 4.21082 4.5953 3.49414 5.88372C2.77746 7.17213 2.41999 8.62909 2.45703 10.103C2.49407 11.5768 2.92459 13.0138 3.70508 14.2646L3.9043 14.5766L3.06836 17.6125L6.19336 16.8007L6.48828 16.9777ZM12.332 14.4887C10.132 13.7297 8.92616 13.1887 6.66016 10.2287C5.51216 8.60469 5.17172 7.08069 6.51172 5.60369C6.66372 5.46515 6.84745 5.36634 7.04688 5.31609C7.2463 5.26584 7.4548 5.26563 7.6543 5.3156C7.8123 5.3156 8.01375 5.25667 8.21875 5.73967C8.42375 6.22267 8.91838 7.45147 8.98438 7.58147C9.02463 7.64613 9.04871 7.72 9.05273 7.79607C9.05676 7.87214 9.04103 7.94798 9.00781 8.01653C8.54281 8.89353 8.03048 8.95866 8.27148 9.37566C8.64715 10.0155 9.11486 10.5963 9.66016 11.0995C10.2491 11.6273 10.926 12.0476 11.6602 12.3415C11.9062 12.4535 12.0493 12.4415 12.1953 12.2765C12.3413 12.1115 12.8184 11.5526 12.9844 11.3056C13.2184 10.9526 13.4081 11.0765 15.2441 11.9875L15.252 11.9225C15.504 12.0405 15.6675 12.0996 15.7285 12.2106C15.7994 12.6128 15.7474 13.027 15.5801 13.3996C15.3964 13.7027 15.1527 13.9646 14.8633 14.1691C14.5739 14.3737 14.2454 14.5165 13.8984 14.5885C13.6999 14.6192 13.4997 14.635 13.2988 14.6357C12.9712 14.6368 12.6446 14.5866 12.332 14.4887Z"
            fill="black"
          />
        </svg>
      ),
    },
  ]

  return (
    <section className={handles.shareContainer}>
      <h4 className={handles.shareContainerTitle}>Compartilhar</h4>
      <div className={handles.shareContainerContent}>
        {shareElements.map((option, index) => (
          <button
            key={index}
            className={handles.shareButton}
            onClick={() => option?.onClick()}
          >
            {option.icon}
          </button>
        ))}
      </div>
    </section>
  )
}

export default withToast(CustomShareproduct)
